---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: {{ .Release.Name }}
spec:
  refreshInterval: "24h"
  secretStoreRef:
    name: scaleway-prep-horoscope-bot
    kind: ClusterSecretStore
  data:
    - secretKey: SENTRY_DSN
      remoteRef:
        key: "name:sentry-dsn"
        decodingStrategy: None
  dataFrom:
    - extract:
        key: "name:manual-secrets"
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: {{ .Release.Name }}-gcp
spec:
  refreshInterval: "24h"
  secretStoreRef:
    name: scaleway-prep-horoscope-bot
    kind: ClusterSecretStore
  data:
    - secretKey: gsa.json
      remoteRef:
        key: "name:gsa-json"
        decodingStrategy: None
